apply plugin: "java"
apply plugin: "idea"
apply plugin: 'maven'

description = 'WebPay Java bindings'
group = 'jp.webpay'
version = '1.1.2c'

task wrapper(type: Wrapper) {
    gradleVersion = '1.7'
}

task javadocJar(type: Jar, dependsOn:javadoc) {
  classifier = 'javadoc'
  from javadoc.destinationDir
}

task sourcesJar(type: Jar, dependsOn:classes) {
  classifier = 'sources'
  from sourceSets.main.allSource
}

artifacts {
  archives jar
  archives javadocJar
  archives sourcesJar
}

repositories {
    mavenCentral()
}

dependencies {
    compile 'com.sun.jersey:jersey-client:1.18.1'
    compile 'com.sun.jersey:jersey-core:1.18.1'
    compile 'org.projectlombok:lombok:1.14.2'
    compile 'net.arnx:jsonic:1.3.0'

    testCompile 'junit:junit:4.11'
    testCompile 'com.github.tomakehurst:wiremock:1.47:standalone'
    testCompile 'commons-io:commons-io:2.4'
}

if (gradle.startParameter.taskNames.contains('uploadArchives')) {
  apply from: 'build.publish.gradle'
}

if (System.getProperty("java.version").startsWith('1.8.0')) {
    test.scanForTestClasses = false
}
